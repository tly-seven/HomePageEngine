---
title: "MotionRugs：集群趋势的时空可视化"
cover: "/images/MotionRugs3.png"
tags: ["数据可视化", "TVCG"]
date: 2018-09-16T19:49:40+08:00
---

追踪大规模集群的迁移是一个挑战性的任务，人们开发了很多技术对集群的时空迁移进行可视化。然而，主流的方法都存在一定的局限性：静态方法存在可拓展性限制；动画方法难以进行时空总览和比较；Small Multiples 方法将连续变化离散化。于是，本文的作者发明了 MotionRugs，一种基于空间划分的集群时空迁移数据的紧密展示方法，可以尽可能的保留行为模式在时空中的变化和其原因，并可以进行总览、追踪和比较，更好的解决上述问题。

<!--more-->

[原文链接：MotionRugs: Visualizing Collective Trends in Space and Time](/files/MotionRugs.pdf)

# 一、介绍
- 背景：
	- 技术的发展允许人们捕获到集群的移动。
- 问题：
	- 理解集群的行为，探索空间或其他影响决策的因素带来的突然性改变。
- 现状：可视化有利于探索随时间演变的移动数据并跟踪变化。
	- 时空立方：
		- 是一篇展示集群的时空移动的论文。
		- 局限性：随着数据量的增大，存在遮挡问题，无法同时比较多个特征。
	- 时空可视化探索分析：
		- 静态表示技术进行可视化
		- 是一篇对时空可视化的综述，提出“静态表示仅限于相对简单的轨迹和少量的移动，否则容易带来混乱”。
	- 基于动画的技术：
		- 用动画表示变化过程。
		- 局限性：对于趋势分析来说，是低效的，无法提供时间的总览
	- Small Multiples：
		- 用离散的图表示总览。
		- 局限性：使连续变化离散化。
- 解决方案：MotionRugs
	- 解决上述问题，提供一个视觉概览表示。
	- 基于空间划分技术的集群时空变化数据的紧密展示方法。
	- 一维时间，一维特征，可以比较
	- 没有尽可能真实的空间表示，更强调行为模式的改变和其原因，但也保留了空间上下文。
- 总结：
	- 新颖的可视化技术
	- 空间划分策略的选择
	- 结果质量量化方法
	- 鱼群模式发掘的例子
	- 专家反馈的评估

# 二、相关工作
- 关于集群移动：
	- 本工作源于集体动物行为的研究，该领域已存在比较好的领域总览文章
	- 先探索实体的移动行为，找到普遍规律
	- 挑战是长时间的大量实体移动数据的审查，寻找普遍行为和异常。
- 关于集群内相互作用：
	- 表征相互作用和从移动中导出行为也是一个既定领域，也存在广泛的介绍和总览文章
	- 许多先进的时空数据可视化分析方法，对待移动实体为单个的、不考虑相互的影响。然而集群内的相互影响是重要的。

## 2.1 时空数据变化可视化
- 已经有一份关于静态和交互式可视化方法的全面概述
- Introduction 部分讨论了传统的方法和其局限性，很多先进的技术用于缓解这些缺点。
- 基于堆叠的属性轨迹数据可视化
	- 在第三个维度进行属性堆叠
	- 使多轨迹之间的特征比较更加高效
	- 这个方法最适合和城市街道结构相关的空间移动
	- 交叉轨迹仍然难以解释和比较
- 基于密度场的移动数据可视化
	- 运用了船只移动数据
	- 该方法是静态的，不运用交互手段时，缺乏编码时间方面的能力
- 以交互为中心的组织大量轨迹的方法
	- 运用了飞机移动轨迹数据
	- 结合了 brush 和 link 的交互和布尔逻辑运算符，降低数据复杂性并提供查询功能
	- 该方法很容易通过过滤错失一些模式
	- 时间层面的模式分析没有被充分支持
- 动画和 Small Multiples
	- 都难以在长时间内追踪变化
	- 动画还能以提供时间上的总览
	- Small Multiples 还使连续变化离散化
	- Small Multiples 通常和其他技术结合，或关注于起始和目的地数据
	- 都存在可拓展性的问题

## 2.2 时空数据相互作用可视化
### 2.2.1 时空集群数据移动可视化（考虑实体相互作用）
- 之前提到的时空数据移动可视化技术，都将每个实体视为独立的。然而，有研究关注于实体间的相互作用。
- 只有很少量的论文讨论了集群内实体间的相互作用的可视分析。
- Space transformation for understanding group movement
	- 计算中心轨迹、安排实体们围绕中心，在时空立方中可视化结果的方法。
	- 更关注于探索集群内的单个相对运动
- Feature-based automatic identification of interesting data segments in group movement data
	- 探索集群行为的特征空间，并自动导出有趣的事件

### 2.2.2 移动实体间的相互作用
- 下面的技术不直接相关于集群行为，但仍然考虑了移动实体间的相互作用
- Trajectory box plot: a new pattern to summarize movements
	- 计算中位轨迹，并结合 box-plot 展示其周边轨迹的时空传播
	- 无法细节到查看单个轨迹，也不支持查看特征
- Visual analysis of movement behavior using web data for context enrichment
	- 通过频繁模式挖掘，在空间上聚合移动实体并导出公共事件序列
	- 通过 Vespa: A pattern-based visual query language for event sequences，提供的一个时空事件序列查询语言，进行查询。
	- 然而，单个实体行为的信息仍旧不可获得
- Visual analytics of delays and interaction in movement data
	- 使用关注反映延迟的可视分析方法，比较了轨迹之间的相互作用
	- 局限性在于，同时只能关注两个移动实体
- Proximity-based visualization of movement trace data
	- 通过对重要事件的接近度的线图抽象移动数据
	- x 轴时间，y 轴到单个事件的距离
	- 可以分析实体间在同一个事件上的相互作用
	- 但不能追踪在时间和空间上的具体行为

### 2.2.3 图可视化
- 另一种思路：
	- 连接实体集群为网络，通过网络结构变化进行分析。
	- 但理解动态网络结构变化是一个挑战
- Parallel edge splatting for scalable dynamic graph visualization
	- 并排绘制图，但这篇工作这样忽略了一种特定的顺序，从而忽略了相互影响。
- Dynamic network visualization withextended massive sequence views
	- 构建在基于边长的节点排序上，揭示了高度交流（连接）的节点
- Let it flow: a static method for exploring dynamic graphs
	- 和本工作可视化结果最接近
	- 描绘了动态网络中的节点的演变
	- 基于图指标排序节点并创建向量场，流表示了顺序随时间的变化
- 本文工作中，实体是独立移动但由集群组织的，也就意味着集群不是直接相连的。这和动态图可视化不一样。
- 本文工作使用空间索引和分区构建拓扑，并映射到静态可视化。这样即可捕获到空间变化和动态。
- Exploring video streams using slit-tear visualizations
	- 在视频固定位置绘制扫描线来创建整个视频流的复合图像
	- 本文工作借鉴了它，识别视频中固定位置的变化

### 2.2.4 体育可视分析中的集群时空移动数据可视化
- 下面的技术讨论体育可视分析中的方法
	- A kick-off forvisual soccer analysis
	- Feature-driven visual analytics of soccer data
- 这两篇工作利用集成或分类来导出重要事件和行为
	- 然而聚合多个轨迹和不完整的事件定义阻碍了对未知集体行为的探索
	- MotionRugs 通过聚合数据的空间维度来克服问题，从而产生密集空间表示，被 Dense Pixel Displays 论文定义为密集像素显示
	
### 2.2.5 总结
- 总结：时空数据可视化方面存在大量相关工作
	- 静态可视化等传统方法受限于遮挡、过度绘制等问题，同时大多不能追踪到单个实体的时空特征细节
	- 在某种程度上，相似的解决方案存在于动态图可视化领域。然而结构和意图仍然有所不同
	- 这些缺点促进了 MotionRugs，利用密集像素显示的优势，实现对大量数据点和特征的紧凑概述。

# 三、MotionRugs 技术
- 坐标轴：
	- x 轴时间
	- y 轴空间和特征
- 工作流：
	1. 将空间特征转化为数据结构（空间树、空间填充曲线）：考虑每个移动数据帧为一个时刻。对每帧，将位置转化为空间数据结构。
	2. 通过空间数据结构，将空间数据点进行一维排序，并编码：
		1. 基于给定策略，遍历空间结果数据结构，导出**实体位置的一维排序**。每个实体由一个填充矩形表示。
		2. 用颜色编码实体特征矩形，例如速度或目的地
	3. 对齐时间轴上的切片
- 关键步骤：
	1. 空间划分和转化：工作流 1 - 2.1
	2. 策略选择：工作流 2.1
	3. 特征编码和视觉解释：工作流 2.2

![](/images/MotionRugs0.png)

## 3.1 空间划分和转化
- 一个空间二维数据转化为一维序列的总览
- 接下来将讨论不同方法对最终结果的影响，以及揭示视觉模式的能力

### 3.1.1 空间填充曲线
- 定义：
	- 是一类连续的一维数学函数，致力于覆盖整个二维（到 n 维）空间，并尽可能准确的保持对象的接近度。
	- 更形象地说，是一条范围包含整个二维空间的曲线
- 典型例子：
	- Z 阶曲线：利于计算
	- 希尔伯特曲线：更好的保留了局部特征
	![](/images/MotionRugs1.png)

### 3.1.2 空间树结构
- 背景：常用于在大型数据库中存储和检索数据
- 常见树结构：
	- QuadTrees(2D)：四叉树
	- Octrees(3D)：八叉树
	- R Trees
	- 以及每种树的变体
- 作用：反映了结构中，节点间空间接近度
	![](/images/MotionRugs2.png)
- 特点：空间树结构不提供固有的一维排序，旨在保留数据的空间属性
- 生成一维序列的方法：
	- 利用树的通用可遍历性
	- 采取 DFS 遍历策略，保留空间位置特征
	- 本工作采用最有代表性的四叉树和 R 树
	- 注：由于四叉树的通用实现生成和 Z 阶曲线相同的一维序列，所以此处四叉树采取 Point-Quadtree
	- Point-Quadtree 的特征是，将插入点的位置处的空间分开，数据不仅存储在叶子节点中。

## 3.2 策略选择
- 排序策略的选择会影响到整体视觉效果，并会影响模式的解释.
	- 空间树：差异在于分隔空间的方式
	- 空间填充曲线：差异在于遍历空间方式
- 比较测试：时空鱼类数据，每秒 25 帧，每两个切片相差 40 m

![](/images/MotionRugs3.png)

- 从视觉效果看
	- 似乎空间填充曲线相比树更有效的近似拟合了空间维度
	- 似乎 R 树相比希尔伯特曲线产生了更多的扩散结果
- 排序策略的量化标准：
	- 量化相邻帧的垂直变化数量
	- Kendall’s τ：
		- Kendall 排名相关系数。表示两个排序中，同序对和反序对数的差和总对数的比值。
		- 反映排序序列的变化程度。1 表示两个排序序列相同，-1 表示两个排序序列相反。
	- Crossings：反序对的绝对数量，即轨迹交叉的对
	- Skips：跳过的总行数
	- 数值过高意味着更低的视觉连贯性
- 量化结果：
	- Kendall’s τ：R 树的视觉连贯性最低。
	- 通过 ANOVA 和 Tukey HSD 再一次证明了 R 树比较糟糕。
	- R 树在空间维度集成上不够出色，缺乏了临近关系信息
	- 其他三种方式的统计差异很小，然而仍然在最大值上有一些差异
	- 最终，相对好的是希尔伯特曲线

![](/images/MotionRugs5.png)
![](/images/MotionRugs4.png)

### 视觉瑕疵
- 通过观察视觉效果来进一步评估
- Phantom-Splits 的瑕疵：
	- 现象：几个实体移动了几个单位，图上不同集群产生了大的变化、视觉分裂
	- 可能的原因：
		- 由于空间数据结构对空间动态信息采集不够平滑，轻微移动后更换了高层分支。分支分裂后，重排序。
		- 的确是某些实体的特征发生了变化。
- 从 Phantom-Splits 的瑕疵的角度，以及之前的统计角度，最好的空间聚合函数是希尔伯特曲线

![](/images/MotionRugs11.png)


## 3.3 移动特征的视觉编码
- 特征（基本运动特征）：
	1. Coherency：每个实体和组的质心间的距离
	2. Speed
	3. Direction
	4. Acceleration
- 视觉编码：Colormap

![](/images/MotionRugs6.png)


## 3.4 MotionRug 的可视化解释
- 集群行为特征由实体们的行为共同点来定义，而不是考虑具体的个体位置
- 两种类型的集群模式：
	- 空间配置模式：集群在空间上的变化
	- 特征进展模式：观察趋势（特征、空间）的出现、演变和消失
- 下面是具体的模式：
- 空间停滞：平行水平线，表示整个组的整体位置停滞不变
	
	![](/images/MotionRugs7.png)
- 空间改变：从顶到底或从底到顶的条带，表示组内的空间变化

	![](/images/MotionRugs8.png)
- 趋势进展：一部分实体引发的行为模式，例如：一组鱼游的更快导致整个组跟随

	![](/images/MotionRugs9.png)
- 分裂和合并：
	- 相似特征实体的空间变化（合并、分裂）
	- 不一定有空间变化，而是特征趋势演化
	- Phantom-Splits

	![](/images/MotionRugs10.png)


# 四、用例和反馈
## 4.1 用例分析
- 鱼群数据集体行为分析
- 数据：
	- 鱼群，151 条鱼
	- 鱼缸，5 厘米深水，保证二维运动
	- 记录，每秒 25 帧
- 模式：
	1. 移动和转向
	2. 打破停滞
	3. 开始和结束里程
	4. 转圈

![](/images/MotionRugs12.png)

## 4.2 专家反馈
- 领域专家：动物集体行为领域的学者

# 五、讨论和未来工作
1. 范围、可比性和可拓展性
2. 可解释性和模式辨别
3. 空间划分策略

# 六、总结
- MotionRugs 的描述和比较
- 空间集成策略的分析和评估
- 专家反馈，分析了 MotionRugs 的应用场景
- 实体相互影响的分析


# 我的思考
- 优点：
	- 可视化方面：
		- 一个新颖、缜密的时空数据可视化总览（Overview）方法，Dense Pixel Displays，结合了流图和矩阵的优点
		- 空间划分和一维映射的方法进行空间可视化
	- 思考和写作方面：
		- 在 Related Work 中，探索空间广阔，集群、集群内的行为都考虑到了，应用范围广。且每一步思考逻辑缜密，考虑周到，写的很好。
		- 在一定程度上考虑了集群内实体的相互影响
	- 评估方面：
		- 对多个方法采用了包括统计、视觉效果、专家反馈等多种方式
- 缺点：
	- 空间集成方法仍然还不够直观
	- 对单个实体的辨认、探索还不足（但这个技术更偏向 Overview）
	- 对属性特征的编码有限
	



